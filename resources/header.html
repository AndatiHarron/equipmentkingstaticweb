<!-- Universal Header Component -->
<header>
   <a>
    <div class="logo" onclick="location.href='{{BASE_PATH}}index.html'">
      <img src="{{BASE_PATH}}assets/companylogo.webp" alt="Equipment King Logo" />
      Equipment King
    </div>
  </a>

  <!-- Mobile Menu Toggle -->
  <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle Menu">
    ☰
  </button>

  <nav id="main-nav">
    <a href="{{BASE_PATH}}index.html">Home</a>
    
    <!-- Trucks Dropdown -->
    <div class="trucks-dropdown">
      <a href="{{BASE_PATH}}trucks.html" class="trucks-btn">Trucks</a>
      <div class="dropdown-menu">
        <ul>
          <!-- LIGHT DUTY TRUCKS -->
          <li>
            <a href="{{BASE_PATH}}trucks.html#light-duty">LIGHT DUTY TRUCKS</a>
            <ul class="sub-dropdown">
              <li>
                <a href="{{BASE_PATH}}trucks.html#x9-series">X9 Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/X9-Tow-Truck.html">X9 Tow Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X9-Aerial-Work-Platform-Truck.html">X9 Aerial Work Platform Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X9-4X4-Dump-Truck.html">X9 4X4 Dump Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X9-Dump-Truck.html">X9 Dump Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X9-Van-Truck.html">X9 Van Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X9-Fuel-Tanker-Truck.html">X9 Fuel Tanker Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X9-Garbage-Truck.html">X9 Garbage Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X9-Refrigerated-Truck.html">X9 Refrigerated Truck</a></li>
                </ul>
              </li>
              <li>
                <a href="{{BASE_PATH}}trucks.html#e9-series">E9 Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/E9-Refrigerated-Truck.html">E9 Refrigerated Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E9-Dump-Truck.html">E9 Dump Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E9-Van-Truck.html">E9 Van Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E9-Kitchen-Waste-Garbage-Truck.html">E9 Kitchen Waste Garbage Truck</a></li>
                </ul>
              </li>
              <li>
                <a href="{{BASE_PATH}}trucks.html#x7-series">X7 Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/X7-Concrete-Mixer-Truck.html">X7 Concrete Mixer Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X7-Flatbed-Truck.html">X7 Flatbed Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X7-Sprinkler-Truck.html">X7 Sprinkler Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X7-Truck-Mounted-Crane.html">X7 Truck Mounted Crane</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X7-Dump-Truck.html">X7 Dump Truck</a></li>
                </ul>
              </li>
              <li>
                <a href="{{BASE_PATH}}trucks.html#i9-series">i9 Series (New Energy)</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/i9-New-Series.html">i9 (New Series) - Electric/Hybrid Technology</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <!-- MEDIUM DUTY TRUCKS -->
          <li>
            <a href="{{BASE_PATH}}trucks.html#medium-duty">MEDIUM DUTY TRUCKS</a>
            <ul class="sub-dropdown">
              <li>
                <a href="{{BASE_PATH}}trucks.html#e6-series">E6 Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/E6-Dump-Truck.html">E6 Dump Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E6-Stake-Truck.html">E6 Stake Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E6-Van-Truck.html">E6 Van Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E6-Refrigerated-Truck.html">E6 Refrigerated Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E6-Sprinkler-Truck.html">E6 Sprinkler Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E6-Truck-Mounted-Crane.html">E6 Truck Mounted Crane</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E6-Cement-Mixer-Truck.html">E6 Cement Mixer Truck</a></li>
                </ul>
              </li>
              <li>
                <a href="{{BASE_PATH}}trucks.html#x6-series">X6 Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Dump-Truck.html">X6 Dump Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Flatbed-Truck.html">X6 Flatbed Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Van-Truck.html">X6 Van Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Truck-Mounted-Crane.html">X6 Truck Mounted Crane</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Cargo-Truck.html">X6 Cargo Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-AWD-Cargo-Truck.html">X6 AWD Cargo Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Dropside-Truck.html">X6 Dropside Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Cement-Mixer-Truck.html">X6 Cement Mixer Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Concrete-Mixer-Truck.html">X6 Concrete Mixer Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Loading-Crane-Recovery-Truck.html">X6 Loading Crane Recovery Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Sprinkler-Truck.html">X6 Sprinkler Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Dust-Suppression-Truck.html">X6 Dust Suppression Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Garbage-Truck.html">X6 Garbage Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/X6-Fuel-Tanker-Truck.html">X6 Fuel Tanker Truck</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <!-- HEAVY DUTY TRUCKS -->
          <li>
            <a href="{{BASE_PATH}}trucks.html#heavy-duty">HEAVY DUTY TRUCKS</a>
            <ul class="sub-dropdown">
              <li>
                <a href="{{BASE_PATH}}trucks.html#z3-series">Z3 Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/Z3-Dump-Truck.html">Z3 Dump Truck</a></li>
                </ul>
              </li>
              <li>
                <a href="{{BASE_PATH}}trucks.html#e1st-series">E1st Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/E1st-Tractor.html">E1st Tractor</a></li>
                </ul>
              </li>
              <li>
                <a href="{{BASE_PATH}}trucks.html#e3-series">E3 Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/E3-Muck-Truck.html">E3 Muck Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E3-Tractor-Truck.html">E3 Tractor Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E3-Van-Truck.html">E3 Van Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E3-Dump-Truck.html">E3 Dump Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E3-Cement-Mixer-Truck.html">E3 Cement Mixer Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E3-Compactor-Garbage-Truck.html">E3 Compactor Garbage Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E3-Stake-Truck.html">E3 Stake Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/E3-Sewage-Suction-Truck.html">E3 Sewage Suction Truck</a></li>
                </ul>
              </li>
              <li>
                <a href="{{BASE_PATH}}trucks.html#9-series">9 Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/9-Series-Sweeper.html">9 Series Sweeper</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/9-Series-Garbage-Truck.html">9 Series Garbage Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/9-Series-Tow-Truck.html">9 Series Tow Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/9-Series-Truck-Mounted-Crane.html">9 Series Truck Mounted Crane</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/9-Series-Cement-Mixer-Truck.html">9 Series Cement Mixer Truck</a></li>
                </ul>
              </li>
              <li>
                <a href="{{BASE_PATH}}trucks.html#6-series">6 Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/6-Series-Sweeper.html">6 Series Sweeper</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/6-Series-Garbage-Truck.html">6 Series Garbage Truck</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/6-Series-Truck-Mounted-Crane.html">6 Series Truck Mounted Crane</a></li>
                  <li><a href="{{BASE_PATH}}trucks_html/6-Series-Cement-Mixer-Truck.html">6 Series Cement Mixer Truck</a></li>
                </ul>
              </li>
              <li>
                <a href="{{BASE_PATH}}trucks.html#3-series">3 Series</a>
                <ul class="truck-links">
                  <li><a href="{{BASE_PATH}}trucks_html/3-Series-Cement-Mixer-Truck.html">3 Series Cement Mixer Truck</a></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
    
    <a href="{{BASE_PATH}}about.html">About</a>
    <a href="{{BASE_PATH}}application.html">Application</a>

    <button class="contact-btn" onclick="location.href='{{BASE_PATH}}contact.html'">Contact Us</button>
  </nav>
</header>

<!-- Header JavaScript -->
<script>
// Mobile Menu Toggle Function
function toggleMobileMenu() {
    const nav = document.getElementById('main-nav');
    nav.classList.toggle('mobile-open');
    
    // Update hamburger icon
    const toggle = document.querySelector('.mobile-menu-toggle');
    toggle.textContent = nav.classList.contains('mobile-open') ? '✕' : '☰';
}

// Close mobile menu when clicking on a link
document.addEventListener('click', function(e) {
    const nav = document.getElementById('main-nav');
    const toggle = document.querySelector('.mobile-menu-toggle');
    
    if (nav && nav.classList.contains('mobile-open') && 
        !toggle.contains(e.target) && !nav.contains(e.target)) {
        nav.classList.remove('mobile-open');
        toggle.textContent = '☰';
    }
});

// ENHANCED TRUCKS DROPDOWN - IMPORTANT: Better delays and hover detection
const trucksDropdown = document.querySelector('.trucks-dropdown');
if (trucksDropdown) {
    const dropdownMenu = trucksDropdown.querySelector('.dropdown-menu');
    let enterTimeout;
    let leaveTimeout;
    let isDropdownVisible = false;

    // Enhanced desktop hover functionality - IMPORTANT FOR ALL PAGES
    if (window.innerWidth >= 768) {
        
        // Enhanced mouseenter with optimized delay
        trucksDropdown.addEventListener('mouseenter', () => {
            clearTimeout(leaveTimeout);
            
            // Small delay to prevent accidental triggers
            enterTimeout = setTimeout(() => {
                dropdownMenu.style.display = 'block';
                setTimeout(() => {
                    dropdownMenu.classList.add('show');
                    isDropdownVisible = true;
                }, 20);
            }, 100); // Reduced from 150ms for faster response
        });

        // Enhanced mouseleave with longer delay for better navigation
        trucksDropdown.addEventListener('mouseleave', () => {
            clearTimeout(enterTimeout);
            
            // Longer delay allows users to navigate to dropdown items
            leaveTimeout = setTimeout(() => {
                dropdownMenu.classList.remove('show');
                isDropdownVisible = false;
                setTimeout(() => {
                    if (!isDropdownVisible) {
                        dropdownMenu.style.display = 'none';
                    }
                }, 400);
            }, 700); // Increased from 500ms for easier navigation
        });

        // Keep dropdown open when hovering over dropdown itself
        dropdownMenu.addEventListener('mouseenter', () => {
            clearTimeout(leaveTimeout);
            isDropdownVisible = true;
        });

        // Enhanced dropdown leave detection with corner tolerance
        dropdownMenu.addEventListener('mouseleave', (e) => {
            // Check if mouse is moving towards corners - give extra time
            const rect = dropdownMenu.getBoundingClientRect();
            const mouseX = e.clientX;
            const mouseY = e.clientY;
            
            // Extended delay if leaving from corners (harder to navigate back)
            const isLeavingFromCorner = 
                (mouseX < rect.left + 50) || (mouseX > rect.right - 50) ||
                (mouseY < rect.top + 50) || (mouseY > rect.bottom - 50);
                
            const delay = isLeavingFromCorner ? 800 : 400; // Longer delay for corners
            
            leaveTimeout = setTimeout(() => {
                dropdownMenu.classList.remove('show');
                isDropdownVisible = false;
                setTimeout(() => {
                    if (!isDropdownVisible) {
                        dropdownMenu.style.display = 'none';
                    }
                }, 400);
            }, delay);
        });

        // Enhanced sub-dropdown hover delays
        const subDropdowns = dropdownMenu.querySelectorAll('.sub-dropdown');
        subDropdowns.forEach(sub => {
            sub.addEventListener('mouseenter', () => {
                clearTimeout(leaveTimeout);
            });
        });
    }
}

// Handle window resize for responsive behavior
window.addEventListener('resize', function() {
    const nav = document.getElementById('main-nav');
    const toggle = document.querySelector('.mobile-menu-toggle');
    
    if (window.innerWidth >= 768) {
        // Desktop mode - ensure nav is visible
        nav.classList.remove('mobile-open');
        toggle.textContent = '☰';
    }
});
</script>